# CSS 样式覆盖

多条规则之间互相冲突时，浏览器会使用一种方法来判定每条规则的权重，从而选出最终获胜的规则进而应用。

## 比较流程

1. 优先选取 `!important` 的规则
2. 比较规则的权重（特殊值，下面提到）
3. 后声明的规则优先使用

## 权重（特殊值）

* 选择器的规则使用4个数字来表示，初始值 0,0,0,0
* 行内样式 (style) 的特殊性值，加1,0,0,0
* ID选择器的特殊性值，加0,1,0,0。
* 类选择器、属性选择器或伪类，加0,0,1,0。
* 元素和伪元素，加0,0,0,1。
* 通配选择器\*对特殊性没有贡献，即0,0,0,0。

举例来说

```css
a{color: yellow;} /*特殊性值：0,0,0,1*/
div a{color: green;} /*特殊性值：0,0,0,2*/
.demo a{color: black;} /*特殊性值：0,0,1,1*/
.demo input[type="text"]{color: blue;} /*特殊性值：0,0,2,1*/
.demo *[type="text"]{color: grey;} /*特殊性值：0,0,2,0*/
#demo a{color: orange;} /*特殊性值：0,1,0,1*/
div#demo a{color: red;} /*特殊性值：0,1,0,2*/
```

浏览器把4位数字从左到右进行比较，直到比出更大的值为止。

注意：从父亲继承来的属性没有特殊值，而通配符 (\*) 虽然是0,0,0,0，但依然比从父亲继承来的属性要高

## 伪类

例如 a 链接的伪类，一般有 :link, :visited, :hover, :active。由于这4者的权重相同，因此定义的顺序就至关重要了。

一般大家都遵循“爱恨原则LVHA”（LoVe HAte），以 l, v, h, a 的顺序进行定义。
原因是当鼠标滑过a链接时，满足:link和:hover两个伪类，要改变a标签的颜色，就必须将:hover伪类在:link伪类后面声明；同理，当鼠标点击激活a链接时，同时满足:link、:hover、:active三种状态，要显示a标签激活时的样式（:active），必须将:active声明放到:link和:hover之后。因此得出LVHA这个顺序。这个顺序能不能变？可以，但也只有:link和:visited可以交换位置，因为一个链接要么访问过要么没访问过，不可能同时满足，也就不存在覆盖的问题。