# 包装类型

为了便于操作“基本类型值”，JS 提供了 三个 特殊的引用类型：Boolean、Number、String。这些类型和其他引用类型相似，但同时也具备与各自基本类型相应的特殊行为。 实际上：每当读取一个基本类型值的时候， “后台就会创建一个 对应的基本包装类型的对象”，从能能够调用一些方法来操作这些数据。 

例如说

```javascript
let a = 'hello'
a.substring(0, 2)
```

a 是一个字符串，并不是对象，也没有原型链 （`a.prototype = undefined`）。但是它却可以调用如 `substirng`, `charAt` 等方法，原因就在于 JS 在后台创建了一个 `String` 对象（`new String('hello')`）

```javascript
//我们平常写程序的过程：
var str = 'hello'; //string 基本类型
var s2 = str.charAt(0); //在执行到这一句的时候 后台会自动完成以下动作 ：
（ 
 var strCopy = new String('hello'); // 1 找到对应的包装对象类型，然后通过包装对象创建出一个和基本类型值相同的对象
 var s2 = strCopy.chaAt(0); // 2 然后这个对象就可以调用包装对象下的方法，并且返回结给s2.
 strCopy = null;  //    3 之后这个临时创建的对象就被销毁了， strCopy =null; 
 ） 
alert(s2);//h 
alert(str);//hello     注意这是一瞬间的动作 实际上我们没有改变字符串本身的值。就是做了下面的动作.这也是为什么每个字符串具有的方法并没有改变字符串本身的原因。

```

由此我们可以知道，引用类型和基本包装对象的区别在于：__生存期__

引用类型所创建的对象，在执行的期间一直在内存中，而基本包装对象只是存在了一瞬间。所以我们无法直接给基本类型添加方法，因为即便创建了也立马销毁了，无法再次调用。

如果一定要添加方法和属性，就只能去包装对象上进行操作，如 `String.prototype.hello = function () {xxx}`。

## 存储位置

这里补充一些内存中 JS 变量存储位置的知识。

JS 的变量分为基本类型和引用类型（对象）。基本类型都存储在 __栈__ 中，引用类型存储在 __堆__ 中，然后在栈中保存一个到堆位置的引用。因此 JS 中对对象的操作都是操作它的引用，而不是对象本身。

为什么基础数据类型存在栈中，而引用数据类型存在堆中呢？

* 堆比栈大，栈比堆速度快。
* 基础数据类型比较稳定，而且相对来说占用的内存小。
* 引用数据类型大小是动态的，而且是无限的。
* 堆内存是无序存储，可以根据引用直接获取。

### 复制

如果是基本类型，则直接把值复制起来再存储一次，也就是操作了本身。

如果是引用类型，复制的只是栈中的引用，因此复制前后的两份引用都指向了堆里的同一个地址，对象本身并没有被复制。
因此如果修改一个引用指向的对象的值，另一个引用指向的对象也会修改（因为其实就是同一个对象）